// Generated by BUCKLESCRIPT VERSION 3.0.0, PLEASE EDIT WITH CARE
"use strict";

var Block = require("bs-platform/lib/js/block.js");
var Curry = require("bs-platform/lib/js/curry.js");
var ReasonReact = require("reason-react/src/ReasonReact.js");

function CreateContext(funarg) {
  var passThrough = props => props.children;
  var state = [funarg[/* value */ 1]];
  var subscriptions = [/* array */ []];
  var addSubscription = function(f) {
    subscriptions[0] = subscriptions[0].concat(/* array */ [f]);
    return function() {
      subscriptions[0] = subscriptions[0].filter(function(sub) {
        return sub !== f;
      });
      return /* () */ 0;
    };
  };
  var updateState = function(newStateOpt) {
    var newState = newStateOpt ? newStateOpt[0] : funarg[/* value */ 1];
    state[0] = newState;
    subscriptions[0].forEach(function(f) {
      return Curry._1(f, newState);
    });
    return /* () */ 0;
  };
  var component = ReasonReact.statelessComponent(
    funarg[/* debugName */ 0] + "ContextProvider"
  );
  var make = function(value, children) {
    return /* record */ [
      /* debugName */ component[/* debugName */ 0],
      /* reactClassInternal */ component[/* reactClassInternal */ 1],
      /* handedOffState */ component[/* handedOffState */ 2],
      /* willReceiveProps */ function() {
        return updateState(value);
      },
      /* didMount */ function() {
        updateState(value);
        return /* () */ 0;
      },
      /* didUpdate */ component[/* didUpdate */ 5],
      /* willUnmount */ component[/* willUnmount */ 6],
      /* willUpdate */ component[/* willUpdate */ 7],
      /* shouldUpdate */ function() {
        return false;
      },
      /* render */ function() {
        return ReasonReact.element(
          /* None */ 0,
          /* None */ 0,
          ReasonReact.wrapJsForReason(passThrough, {}, children)
        );
      },
      /* initialState */ component[/* initialState */ 10],
      /* retainedProps */ component[/* retainedProps */ 11],
      /* reducer */ component[/* reducer */ 12],
      /* subscriptions */ component[/* subscriptions */ 13],
      /* jsElementWrapped */ component[/* jsElementWrapped */ 14]
    ];
  };
  var component$1 = ReasonReact.reducerComponent(
    funarg[/* debugName */ 0] + "ContextConsumer"
  );
  var make$1 = function(children) {
    return /* record */ [
      /* debugName */ component$1[/* debugName */ 0],
      /* reactClassInternal */ component$1[/* reactClassInternal */ 1],
      /* handedOffState */ component$1[/* handedOffState */ 2],
      /* willReceiveProps */ component$1[/* willReceiveProps */ 3],
      /* didMount */ function(param) {
        var send = param[/* send */ 3];
        return Curry._1(
          param[/* onUnmount */ 4],
          addSubscription(function(newState) {
            return Curry._1(send, /* ChangeState */ [newState]);
          })
        );
      },
      /* didUpdate */ component$1[/* didUpdate */ 5],
      /* willUnmount */ component$1[/* willUnmount */ 6],
      /* willUpdate */ component$1[/* willUpdate */ 7],
      /* shouldUpdate */ component$1[/* shouldUpdate */ 8],
      /* render */ function(param) {
        return Curry._1(children, param[/* state */ 1]);
      },
      /* initialState */ function() {
        return state[0];
      },
      /* retainedProps */ component$1[/* retainedProps */ 11],
      /* reducer */ function(action, _) {
        return /* Update */ Block.__(0, [action[0]]);
      },
      /* subscriptions */ component$1[/* subscriptions */ 13],
      /* jsElementWrapped */ component$1[/* jsElementWrapped */ 14]
    ];
  };
  return [subscriptions, [make], [make$1]];
}

exports.CreateContext = CreateContext;
/* ReasonReact Not a pure module */
